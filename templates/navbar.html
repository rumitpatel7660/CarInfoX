<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation - CarInfoX</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="Navigate through CarInfoX's comprehensive car information platform. Access car reviews, comparisons, recommendations, and more.">
    <meta name="keywords" content="car navigation, car menu, automotive navigation, car website menu, car platform navigation, car site navigation, car web navigation, car interface navigation, car user interface, car UI navigation, car website structure, car platform structure, car site structure, car web structure, car interface structure, car user experience, car UX navigation, car website design, car platform design, car site design, car web design, car interface design, car user interface design, car navigation system, car menu system, car navigation layout, car menu layout, car navigation structure, car menu structure, car navigation elements, car menu elements, car navigation features, car menu features, car navigation components, car menu components, car navigation tools, car menu tools, car navigation options, car menu options, car navigation links, car menu links, car navigation buttons, car menu buttons, car navigation icons, car menu icons, car navigation labels, car menu labels, car navigation categories, car menu categories, car navigation sections, car menu sections, car navigation pages, car menu pages, car navigation paths, car menu paths, car navigation routes, car menu routes, car navigation flow, car menu flow">
    <meta name="author" content="CarInfoX">
    <meta name="robots" content="noindex, nofollow">
    <meta property="og:title" content="Navigation - CarInfoX">
    <meta property="og:description" content="Navigate through CarInfoX's car information platform with ease.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://carinfox.com">
    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='favicon/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='favicon/site.webmanifest') }}">
    <link rel="mask-icon" href="{{ url_for('static', filename='favicon/safari-pinned-tab.svg') }}" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='Title Icon.png') }}">
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='Title Icon.png') }}">
    <!-- Car Icon for Browser Tab -->
    <!-- <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2360A5FA' viewBox='0 0 16 16'%3E%3Cpath d='M4 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm10 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2H6zM4.862 4.276L3.906 6.19a.51.51 0 0 0 .497.731c.91-.073 2.35-.17 3.597-.17 1.247 0 2.688.097 3.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 10.691 4H5.309a.5.5 0 0 0-.447.276z'/%3E%3Cpath d='M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848z'/%3E%3C/svg%3E" type="image/svg+xml"> -->

    <style>
        /* Navbar Styling */
        nav {
            background: linear-gradient(135deg, #1a202c 30%, #2c5282 70%);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            padding: 0.35rem 0;
        }

        nav .container {
            padding: 0 0.75rem;
        }

        /* Logo Styling */
        nav a[href="{{ url_for('index') }}"] {
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            transition: transform 0.3s ease;
        }

        nav a[href="{{ url_for('index') }}"]:hover {
            transform: scale(1.05);
        }

        /* Navigation Links Styling */
        nav .flex a:not([href="{{ url_for('index') }}"]) {
            color: #e2e8f0;
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            transition: all 0.3s ease;
            position: relative;
            font-size: 0.85rem;
            white-space: nowrap;
        }

        nav .flex a:not([href="{{ url_for('index') }}"]):hover {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        nav .flex a:not([href="{{ url_for('index') }}"]):after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 1.5px;
            background: #60a5fa;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        nav .flex a:not([href="{{ url_for('index') }}"]):hover:after {
            width: 80%;
        }

        /* Login Button Styling */
        nav a[href="{{ url_for('login_page') }}"] {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            font-weight: 600;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2);
            font-size: 0.85rem;
        }

        nav a[href="{{ url_for('login_page') }}"]:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 12px rgba(37, 99, 235, 0.3);
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }

        /* Profile Section Styling */
        /* #profileBtn {
            border: 1.5px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        #profileBtn:hover {
            border-color: #60a5fa;
            transform: scale(1.05);
        }

        #profileBtn img {
            transition: transform 0.3s ease;
        }

        #profileBtn:hover img {
            transform: scale(1.1);
        }

        
        #profileDropdown {
            min-width: 200px;
            border-radius: 0.75rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.5rem 0;
            transform-origin: top;
            animation: dropdownFade 0.3s ease;
            margin-top: 0.5rem;
        }

        @keyframes dropdownFade {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #profileDropdown p {
            color: #1e293b;
            padding: 0.4rem 1rem;
            font-weight: 500;
            font-size: 0.85rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        #profileDropdown a {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.4rem 1rem;
            color: #475569;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 0.85rem;
        }

        #profileDropdown a:hover {
            background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
            color: white;
            transform: translateX(3px);
        }

        #profileDropdown a:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 2px;
            background: #3b82f6;
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        #profileDropdown a:hover:before {
            transform: scaleY(1);
        } */

        .profile-button {
            background: white;
            border-radius: 9999px;
            padding: 0.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .profile-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .profile-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            width: 280px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .profile-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .profile-header {
            padding: 1.25rem;
            border-bottom: 1px solid #e5e7eb;
            background: linear-gradient(to right, #f8fafc, #f1f5f9);
        }
        
        .profile-avatar {
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .profile-info {
            margin-left: 0.5rem;
        }
        
        .profile-info h3 {
            color: #1e293b;
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }
        
        .profile-info p {
            color: #64748b;
            font-size: 0.875rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 180px;
        }

        .profile-menu-items {
            padding: 0.5rem;
        }
        
        .profile-menu-items a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            margin: 0.25rem 0;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.9375rem;
        }

        /* Profile link styling */
        .profile-menu-items a.profile-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: black;
            font-weight: bold;
        }
        .profile-menu-items a.profile-link i {
            color: #3b82f6;
        }

        /* History link styling */
        .profile-menu-items a.history-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: black;
            font-weight: bold;
        }
        .profile-menu-items a.history-link i {
            color: #0ea5e9;
        }

        /* Logout link styling */
        .profile-menu-items a.logout-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: black;
            font-weight: bold;
            margin-top: 0.5rem;
            border-top: 1px solid #e5e7eb;
            padding-top: 1rem;
        }
        .profile-menu-items a.logout-link i {
            color: #ef4444;
        }

        /* Common hover effect for all menu items */
        .profile-menu-items a:hover {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            transform: translateX(4px);
            color: white !important;
        }

        .profile-menu-items a:hover,
        .profile-menu-items a:hover i {
            color: rgb(8, 7, 7) !important;
        }
        
        .profile-menu-items a i {
            margin-right: 0.75rem;
            width: 1.25rem;
            text-align: center;
            font-size: 1.125rem;
        }

        .menu-divider {
            height: 1px;
            background: #e5e7eb;
            margin: 0.5rem 0;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            nav {
                padding: 0.25rem 0;
            }

            nav .container {
                padding: 0 0.5rem;
            }

            nav .flex {
                gap: 0.5rem;
            }

            nav .flex a:not([href="{{ url_for('index') }}"]) {
                padding: 0.25rem 0.35rem;
                font-size: 0.8rem;
            }

            nav .flex a:not([href="{{ url_for('index') }}"]) span {
                display: none;
            }

            nav .flex a:not([href="{{ url_for('index') }}"]) i {
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    <!-- Add SweetAlert2 CSS and JS -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Navigation Bar -->
    <nav class="bg-gray-800 p-4 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <a href="{{ url_for('index') }}" class="text-white text-lg font-bold flex items-center gap-2"
                onclick="navigateTo('home')">
                <i class="fas fa-car text-blue-400"></i>
                <span>CarInfoX</span>
            </a>
            <div class="flex items-center gap-4">
                <a href="{{ url_for('comparison') }}" class="text-white text-lg font-bold flex items-center gap-1"
                    onclick="navigateTo('comparison')">
                    <i class="fas fa-balance-scale text-blue-400"></i>
                    <span>Car Comparison</span>
                </a>
                <a href="{{ url_for('recommendation')}}" class="text-white text-lg font-bold flex items-center gap-1"
                    onclick="navigateTo('recommendation')">
                    <i class="fas fa-star text-blue-400"></i>
                    <span>Recommendation</span>
                </a>
                <a href="{{ url_for('dashboard') }}" class="text-white text-lg font-bold flex items-center gap-1"
                    onclick="navigateTo('analytics')">
                    <i class="fas fa-chart-line text-blue-400"></i>
                    <span>Analytics</span>
                </a>

                <!-- User Authentication -->
                <!-- <div class="relative ml-2">
                    {% if user %}
                    
                    <div id="profileBtn" class="h-8 w-8 rounded-full overflow-hidden cursor-pointer">
                        <img src="static/images/a.png" alt="Profile" class="h-full w-full object-cover">
                    </div>
                    <div id="profileDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg hidden">
                        <div class="px-4 py-2">
                            <p class="text-sm font-medium text-gray-900">{{ user.name }}</p>
                            <p class="text-sm text-gray-500 truncate">{{ user.email }}</p>
                        </div>
                        <div class="border-t px-4 border-gray-200"></div>
                        <a href="{{ url_for('my_history') }}"
                            class="block text-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i class="fas fa-history mr-2"></i>My History
                        </a>
                        <a href="{{ url_for('logout') }}"
                            class="block text-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                            onclick="return confirm('Are you sure you want to logout?')">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </a>
                    </div>
                    {% else %}
                    <a href="{{ url_for('login_page') }}"
                        class="bg-blue-600 text-white font-semibold px-3 py-1.5 rounded flex items-center gap-2">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Login</span>
                    </a>
                    {% endif %}
                </div> -->

                <div class="relative ml-2">
                    {% if user %}
                    <button class="profile-button" id="profileButton">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold">
                            {{ user.name[0] }}
                        </div>
                    </button>
                    <div class="profile-menu" id="profileMenu">
                        <div class="profile-header">
                            <div class="flex items-center">
                                <div class="profile-avatar">
                                    {{ user.name[0] | upper }}
                                </div>
                                <div class="profile-info">
                                    <h3>{{ user.name }}</h3>
                                    <p title="{{ user.email }}">{{ user.email }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="profile-menu-items">
                            <a href="{{ url_for('my_history') }}#user-profile-section" class="profile-link">
                                <i class="fas fa-user"></i>
                                <span>My Profile</span>
                            </a>
                            <a href="{{ url_for('my_history') }}" class="history-link">
                                <i class="fas fa-history"></i>
                                <span>My History</span>
                            </a>
                            <a href="#" class="logout-link" id="logoutButton">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <a href="{{ url_for('login_page') }}" class="bg-blue-600 text-white font-semibold px-3 py-1.5 rounded flex items-center gap-2">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Login</span>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full" style="z-index: 1000;">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Confirm Logout</h3>
                    <button id="closeLogoutModal" class="text-gray-400 hover:text-gray-500">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mt-6">
                    <p class="text-gray-600">Are you sure you want to logout?</p>
                    <div class="mt-6 flex justify-end gap-4">
                        <button id="cancelLogout" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">
                            Cancel
                        </button>
                        <a href="{{ url_for('logout') }}" id="confirmLogout" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                            Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        let profileBtn = document.getElementById('profileButton');
        let profileDropdown = document.getElementById('profileMenu');

        profileBtn.addEventListener('click', function (event) {
            event.stopPropagation();
            profileDropdown.classList.toggle('active');
        });

        document.addEventListener('click', function (event) {
            if (!profileDropdown.contains(event.target) && !profileBtn.contains(event.target)) {
                profileDropdown.classList.remove('active');
            }
        });
    });

    // Logout Modal Functionality
    const logoutButton = document.getElementById('logoutButton');
    
    logoutButton.addEventListener('click', (e) => {
        e.preventDefault();
        Swal.fire({
            title: 'Are you sure?',
            text: "You will be logged out of your account.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, logout!',
            cancelButtonText: 'Cancel'
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = "{{ url_for('logout') }}";
            }
        });
    });
</script>
</html>